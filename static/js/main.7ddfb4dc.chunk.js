(this["webpackJsonp@mydobie/feature-flags"]=this["webpackJsonp@mydobie/feature-flags"]||[]).push([[0],{38:function(e,t,r){"use strict";r.r(t);var n,a=r(1),s=r.n(a),c=r(14),i=r(13),o=r.n(i),l=r(7),u=r(19),d=r(3),j=r(9),b=r(4),h="featureFlags",O="featuresFlagsPersist",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Array.from(e);return t.forEach((function(e){var t=r.findIndex((function(t){return t.id===e.id}));-1===t?r.push({id:e.id,active:e.active,description:e.description}):r[t].active=e.active})),r},v=function(){var e;return JSON.parse(null!==(e=localStorage.getItem(h))&&void 0!==e?e:"[]")},g=function(e){return e.FeatureFlags.features},x=function(e){return e.FeatureFlags.persist},p=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FeatureFlags";return void 0!==n?null===(r=n[a].features.find((function(t){return t.id===e})))||void 0===r?void 0:r.active:(null===(t=v().find((function(t){return t.id===e})))||void 0===t?void 0:t.active)||!1},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e,n=s.a.useState((function(){try{var e=window.localStorage.getItem(r);return e?JSON.parse(e):t}catch(n){return console.log(n),t}})),a=Object(d.a)(n,2),c=a[0],i=a[1],o=function(e){try{var t=e instanceof Function?e(c):e;i(t),window.localStorage.setItem(r,JSON.stringify(t))}catch(n){console.log(n)}};return[c,o]},y=r(11),F="featureFlagsAdd",S="featureFlagsEdit",E="featureFlagsReset",R={features:[],persist:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var r=t.payload,n=r.features,a=r.overrides,s=r.persist,c=r.reset,i=c||!s?[]:Object(y.a)(e.features);return f(n,a).forEach((function(e){var t=i.findIndex((function(t){return t.id===e.id}));-1===t?i.push(Object(b.a)(Object(b.a)({},e),{},{original:e.active})):i[t].original=e.active})),Object(b.a)(Object(b.a)({},e),{},{persist:s,features:i});case S:var o=Object(y.a)(e.features),l=o.findIndex((function(e){return e.id===t.payload.id}));return o[l].active=t.payload.active,Object(b.a)(Object(b.a)({},e),{},{features:o});case E:var u=Object(y.a)(e.features),d=u.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{active:e.original})}));return Object(b.a)(Object(b.a)({},e),{},{features:d});default:return e}},A=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FeatureFlags";return(null===(t=Object(l.c)((function(e){return e[r].features})).find((function(t){return t.id===e})))||void 0===t?void 0:t.active)||!1},N=r(0),C=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16","aria-hidden":"true","data-testid":"flagNotInitialWarning",children:[Object(N.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(N.jsx)("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"})]}),Object(N.jsx)("span",{className:"sr-only visually-hidden",children:"Differs from default"})]})},T=function(e){var t=e.features,r=void 0===t?[]:t,n=e.onFeatureClick,a=void 0===n?function(){}:n,s=e.onFeatureReset,c=void 0===s?function(){}:s,i=e.persist,o=void 0!==i&&i,l=e.readonly,u=void 0!==l&&l;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("ul",{"data-testid":"coreFeatureFlagsUI",children:r.map((function(e){var t;return Object(N.jsx)("li",{children:Object(N.jsxs)("div",{className:"form-check form-switch custom-control custom-switch",children:[Object(N.jsx)("input",{className:"form-check-input custom-control-input",type:"checkbox",id:e.id,checked:e.active,onChange:function(t){a(e.id,t.target.checked)},disabled:u})," ",Object(N.jsxs)("label",{className:"form-check-label custom-control-label",htmlFor:e.id,children:[null!==(t=e.description)&&void 0!==t?t:e.id," ",e.active!==e.original?Object(N.jsx)(C,{}):null]})]})},e.id)}))}),o&&!u?Object(N.jsxs)("p",{className:"alert alert-secondary",role:"alert","data-testid":"persistAlert",children:[Object(N.jsx)("strong",{children:"NOTE:"})," Feature flag values are persisting on page refresh. This is not recommended for a production environment. Check the"," ",Object(N.jsx)("code",{children:"persist"})," setting when calling ",Object(N.jsx)("code",{children:"loadFeatureFlags"})," ","or ",Object(N.jsx)("code",{children:"loadFeatureFlagsRedux"}),"."]}):null,u?null:Object(N.jsx)("button",{type:"button",className:"btn btn-success","data-testid":"resetButton",onClick:function(){return c()},children:"Reset flags to default"})]})},k=function(e){var t=e.onFeatureChange,r=void 0===t?function(){}:t,n=e.onFeatureReset,a=void 0===n?function(){}:n,s=e.readonly,c=void 0!==s&&s,i=Object(l.b)();return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(T,{features:Object(l.c)(g),onFeatureClick:function(e,t){i({type:S,payload:{id:e,active:t}}),r(e,t)},onFeatureReset:function(){i({type:E}),a()},persist:Object(l.c)(x),readonly:c})})},P=r(17),w=r.n(P),I=r(20),L=function(e){var t=e.onFeatureChange,r=void 0===t?function(){}:t,n=e.onFeatureReset,a=void 0===n?function(){}:n,s=e.readonly,c=void 0!==s&&s,i=m(h),o=Object(d.a)(i,2),l=o[0],u=o[1],j=m(O),f=Object(d.a)(j,1)[0];return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(T,{persist:f,features:l,onFeatureClick:function(){var e=Object(I.a)(w.a.mark((function e(t,n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(y.a)(l).map((function(e){return e.id===t?Object(b.a)(Object(b.a)({},e),{},{active:n}):e})),u(a),r(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),onFeatureReset:function(){var e=v().map((function(e){return Object(b.a)(Object(b.a)({},e),{},{active:e.original||!1})}));u(e),a()},readonly:c})})},D="/local",G="/redux",U="/readonly",V="COLORS",J="DINOS",z="FRUITS",H="VEGGIES",K=[{id:z,active:!1,description:"Fruit list"},{id:H,active:!0,description:"Vegetable list"}],W=[{id:V,active:!1,description:"Color list"},{id:J,active:!1,description:"Dino list"}],B=function(){var e=Object(l.c)((function(e){return p(H,e)})),t=Object(l.c)((function(e){return p(z,e)})),r={backgroundColor:"#ccc",color:"#000"};return Object(N.jsx)("nav",{children:Object(N.jsxs)("ul",{className:"nav",children:[Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(j.b,{className:"nav-link",to:"/",children:"Home"})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(j.b,{className:"nav-link",to:D,children:"Local storage"})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(j.b,{className:"nav-link",to:G,children:"Redux"})}),Object(N.jsx)("li",{className:"nav-item",children:Object(N.jsx)(j.b,{className:"nav-link",to:U,children:"Read only"})}),p(V)?Object(N.jsx)("li",{className:"nav-item nav-link",style:r,children:"Link to Colors"}):null,p(J)?Object(N.jsx)("li",{className:"nav-item nav-link",style:r,children:"Link to Dinos"}):null,t?Object(N.jsx)("li",{className:"nav-item nav-link",style:r,children:"Link to Fruits"}):null,e?Object(N.jsx)("li",{className:"nav-item nav-link",style:r,children:"Link to Veggies"}):null]})})},M=r(2),q=function(){var e=A(H),t=A(z);return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("h1",{children:"Feature flags - redux"}),Object(N.jsx)(k,{onFeatureChange:function(e,t){console.log("Feature flag ",e," is active:",t)},onFeatureReset:function(){console.log("Redux based features have been reset")}}),t?Object(N.jsxs)("div",{children:[Object(N.jsx)("hr",{}),Object(N.jsx)("h2",{children:"Fruit content"}),Object(N.jsx)("p",{children:"Thai basil curry dark chocolate grapefruit avocado basil pesto habanero golden cherry balsamic vinaigrette spicy kimchi Thai curry roasted brussel sprouts blueberry pops scotch bonnet pepper creamiest strawberry mango smoothie banana creamy cauliflower alfredo sauce udon noodles picnic crispy salted coriander ginger carrot spiced juice hazelnut shiitake."})]}):null,e?Object(N.jsxs)("div",{children:[Object(N.jsx)("hr",{}),Object(N.jsx)("h2",{children:"Veggie content"}),Object(N.jsx)("p",{children:"Fiery fruit hot Thai super chili red amazon pepper with Thai sun pepper red lentil curry tabasco pepper summertime crumbled lentils blueberries crunchy seaweed basil roasted peanuts tofu avocado dressing drizzle orange naga viper cremini mushrooms alfalfa sprouts picnic salad green pepper black bean wraps dark and stormy overflowing a delicious meal leek lychee."})]}):null]})},Q=function(e){var t=e.onFeatureChange,r=void 0===t?function(){}:t;return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("h1",{children:"Feature flags - local storage"}),Object(N.jsx)(L,{onFeatureChange:function(e,t){r(),console.log("Feature flag ",e,"is active:",t)},onFeatureReset:function(){r(),console.log("Local storage based features have been reset")}}),p(V)?Object(N.jsxs)("div",{children:[Object(N.jsx)("hr",{}),Object(N.jsx)("h2",{children:"Colors content"}),Object(N.jsx)("p",{children:"Wafer gummi bears drag\xe9e cheesecake gummi bears carrot cake tart jelly-o sweet roll. Tart souffl\xe9 chocolate cake marzipan sweet roll tootsie roll wafer gummies. Souffl\xe9 tiramisu cheesecake ice cream lemon drops pastry oat cake ice cream donut. Candy canes liquorice souffl\xe9 danish brownie macaroon macaroon drag\xe9e."})]}):null,p(J)?Object(N.jsxs)("div",{children:[Object(N.jsx)("hr",{}),Object(N.jsx)("h2",{children:"Dinos content"}),Object(N.jsx)("p",{children:"Lessemsaurus Acristavus Koreaceratops Nebulasaurus Propanoplosaurus Owenodon Onychosaurus Rayososaurus Nurosaurus Lambeosaurus Tethyshadros Bellusaurus Chromogisaurus Nanotyrannus Monoclonius Sterrholophus Dryosaurus Galvesaurus Geranosaurus Aviatyrannis Ricardoestesia Omnivoropteryx Tianyuraptor Kakuru Cylindricodon Stenopelix Ornatotholus Cystosaurus Struthiosaurus Rileyasuchus."})]}):null]})},X=function(){return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("h1",{children:"Local Storage Flags - Read Only"}),Object(N.jsx)(L,{readonly:!0}),Object(N.jsx)("hr",{}),Object(N.jsx)("h1",{children:"Redux Flags - Read Only"}),Object(N.jsx)(k,{readonly:!0})]})},Y=function(){var e=function(){var e=s.a.useState([{},function(){}]),t=Object(d.a)(e,2),r=t[0],n=t[1];return[r,function(){fetch("/featureFlags/versions.json").then((function(e){return e.json()})).then((function(e){if(!e)throw Error("No version data");n(e)})).catch((function(){return console.error("Error finding versions file")}))}]}(),t=Object(d.a)(e,2),r=t[0],n=t[1];return s.a.useEffect((function(){n()}),[]),Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("div",{className:"row",children:Object(N.jsxs)("div",{className:"col",children:[Object(N.jsx)("h1",{children:"Feature Flags demo"}),Object(N.jsx)("p",{children:"This simple package allows you mark items as feature flags and then set the availability of those items through configuration."})]})}),Object(N.jsx)("div",{className:"row",children:Object(N.jsxs)("div",{className:"col",children:[Object(N.jsx)("hr",{}),Object(N.jsx)("h2",{children:"Version: "}),Object(N.jsxs)("ul",{children:[Object(N.jsxs)("li",{children:[Object(N.jsx)("strong",{children:"Project Name: "}),"@mydobie/feature-flags"]}),Object(N.jsxs)("li",{children:[Object(N.jsx)("strong",{children:"Project Version: "}),"2.3.0"]}),Object(N.jsxs)("li",{children:[Object(N.jsx)("strong",{children:"State persists on refresh: "}),"false"]}),Object(N.jsxs)("li",{children:[Object(N.jsx)("strong",{children:"Git Commit: "}),"3956ea9"]}),Object(N.jsxs)("li",{children:[Object(N.jsx)("strong",{children:"React Version: "}),s.a.version]}),Object(N.jsxs)("li",{children:[Object(N.jsx)("strong",{children:"React Redux: "}),r["react-redux"]]}),Object(N.jsxs)("li",{children:[Object(N.jsx)("strong",{children:"Bootstrap CSS Version: "}),r.bootstrap]})]})]})})]})},Z=r.p+"static/media/page_not_found.61ba8739.svg",$=function(){return Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)("h1",{children:"Page not found"}),Object(N.jsx)("p",{children:"The page you requested could not be found."}),Object(N.jsx)("p",{style:{textAlign:"center"},children:Object(N.jsx)("img",{src:Z,className:"App-logo",alt:""})})]})},ee=function(e){var t=e.onFeatureChange,r=void 0===t?function(){}:t;return Object(N.jsx)("div",{children:Object(N.jsxs)(M.c,{children:[Object(N.jsx)(M.a,{path:"/",element:Object(N.jsx)(Y,{})}),Object(N.jsx)(M.a,{path:D,element:Object(N.jsx)(Q,{onFeatureChange:r})}),Object(N.jsx)(M.a,{path:G,element:Object(N.jsx)(q,{})}),Object(N.jsx)(M.a,{path:U,element:Object(N.jsx)(X,{})}),Object(N.jsx)(M.a,{path:"*",element:Object(N.jsx)($,{})})]})})};r(35);!function(e){var t=e.features,r=e.persist,n=e.overrides;r||localStorage.setItem(h,JSON.stringify([])),localStorage.setItem(O,r?"true":"false"),f(t||[],n||[]).forEach((function(e){!function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=JSON.parse(null!==(r=localStorage.getItem(h))&&void 0!==r?r:"[]"),s=a.findIndex((function(t){return t.id===e}));-1===s?a.push({id:e,active:t,description:n,original:t}):a[s].original=t,localStorage.setItem(h,JSON.stringify(a))}(e.id,e.active,e.description)}))}({features:W,overrides:JSON.parse(null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:"/featureFlags",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_SHA:"3956ea9",REACT_APP_VERSION:"2.3.0",REACT_APP_NAME:"@mydobie/feature-flags",REACT_APP_USE_LOCAL_STORAGE:"true",REACT_APP_FEATURE_FLAGS_PERSIST:"false"}).REACT_APP_FEATURE_FLAGS)&&void 0!==n?n:"[]"),persist:!1});var te=function(){var e=Object(a.useReducer)((function(e){return e+1}),0),t=Object(d.a)(e,2)[1],r=Object(l.b)();s.a.useEffect((function(){var e;r(function(e){var t=e.features,r=e.overrides,n=void 0===r?[]:r,a=e.persist,s=void 0!==a&&a,c=e.reset;return{type:F,payload:{features:t,overrides:n,persist:s,reset:c}}}({features:K||[],overrides:JSON.parse(null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:"/featureFlags",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_SHA:"3956ea9",REACT_APP_VERSION:"2.3.0",REACT_APP_NAME:"@mydobie/feature-flags",REACT_APP_USE_LOCAL_STORAGE:"true",REACT_APP_FEATURE_FLAGS_PERSIST:"false"}).REACT_APP_FEATURE_FLAGS)&&void 0!==e?e:"[]"),persist:!1}))}),[]);return Object(N.jsx)("div",{children:Object(N.jsxs)(j.a,{basename:"",children:[Object(N.jsx)(B,{}),Object(N.jsx)("main",{children:Object(N.jsx)(ee,{onFeatureChange:t})})]})})},re=r(8),ne=r(21),ae=r.n(ne),se=r(22),ce=r.n(se),ie=Object(re.a)({FeatureFlags:_}),oe={key:"root",storage:ae.a,stateReconciler:ce.a},le=ie;le=Object(c.a)(oe,ie);var ue=function(){return Object(re.b)(le)}(),de=Object(c.b)(ue),je=Object(N.jsx)(u.a,{loading:null,persistor:de,children:Object(N.jsx)(te,{})});o.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(l.a,{store:ue,children:je})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.7ddfb4dc.chunk.js.map